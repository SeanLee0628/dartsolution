
# This file is for AWS Amplify Hosting configuration
version: 1
frontend:
  phases:
    build:
      commands:
        # Since this is a simple static site without a framework build step,
        # we copy the contents of the 'public' folder to the root so strict fetches like '/corp_codes.json' work.
        - cp -r public/* .
  artifacts:
    # We serve files directly from the project root
    baseDirectory: .
    files:
      - '**/*'
  cache:
    paths: []
  customHeaders:
    - pattern: '**/*'
      headers:
        - key: 'Cache-Control'
          value: 'public, max-age=0, must-revalidate'
    - pattern: '/index.html'
      headers:
        - key: 'Cache-Control'
          value: 'no-cache'
rewrites:
  # Maintain rewrites in case we revert to relative paths in the future
  - source: /api/<*>
    target: https://opendart.fss.or.kr/api/<*>
    status: 200
  - source: /stock-api/<*>
    target: https://apis.data.go.kr/1160100/service/GetStockSecuritiesInfoService/<*>
    status: 200
  - source: /<*>
    target: /index.html
    status: 200
